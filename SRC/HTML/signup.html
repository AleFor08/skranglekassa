<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/Main.css') }}">
    <title>Skranglekassa.no/Registrer Bruker</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='IMG/favicon.ico') }}">
</head>

 <!--Header-->
<header>
    <h2>Skranglekassa.no</h2>
</header>

 <!--Navigation Buttons-->
<nav>
    <a href="{{ url_for('home')}}" class="navBtn">&lt;- Tilbake</a>  
</nav>

 <!--Sign up box-->
<body>
    <h1>Registrer bruker:</h1>

    <div class="inputpage">
        <form id="signupForm">
            <label for="fname">Fornavn <div class="asterisk">*</div></label>
            <br>
            <input type="text" id="fname" name="firstname" placeholder="Skriv inn fornavn..." required>
            <br>

            <label for="lname">Etternavn <div class="asterisk">*</div></label>
            <br>
            <input type="text" id="lname" name="lastname" placeholder="Skriv inn etternavn..." required>
            <br>

            <label for="email">E-Post <div class="asterisk">*</div></label>
            <br>
            <input type="text" id="email" name="email" placeholder="Skriv inn E-Post..." required>
            <br>

            
            <label for="birthday">Fødselsdag <div class="asterisk">*</div></label>
            <br>
            <input type="date" id="birthday" required>
            <br>
            
            <label for="cpassword">Lag Passord <div class="asterisk">*</div></label>
            <br>
            <input type="password" id="cpassword" name="createpassword" placeholder="Lag passord..." required>
            <br>

            <label for="rpassword">Gjenta Passord <div class="asterisk">*</div></label>
            <br>
            <input type="password" id="rpassword" name="repeatpassword" placeholder="Gjenta passord..." required>
            <br>

            <h4 id="required"><div class="asterisk">*</div> Påkrevd</h4>
            <input type="submit" value="Send Inn">
        </form>

        <script>
            document.getElementById("signupForm").addEventListener("submit", async (e) => {
                e.preventDefault();

                let res = await fetch("http://127.0.0.1:5000/signup", {
                    method: "POST",
                    headers: { "Content-Type": "application/json"},
                    body: JSON.stringify({
                        fname: document.getElementById("fname").value,
                        lname: document.getElementById("lname").value,
                        email: document.getElementById("email").value,
                        cpassword: document.getElementById("cpassword").value,
                        birthdate: document.getElementById("birthday").value
                    })
                });

                if (document.getElementById("cpassword").value == document.getElementById("rpassword").value) {
                    let data = await res.json();
                    alert(data.message);
                    document.getElementById('signupForm').reset()
                } else {
                    alert("The passwords don't match. Try again.");
                }
                
            });
        </script>
    </div>
    <br>
</body>

 <!--Footer-->
<footer>
    <h2>Skranglekassa.no</h2>
</footer>
</html>